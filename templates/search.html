{% extends 'base.html' %}
{% block title %}Search - InsecureStore{% endblock %}

{% block content %}

<h2 style="color:#facc15; margin-bottom: 20px;">ğŸ” Search Products</h2>

<!-- SQL Injection Popup -->
{% if sqli_success %}
<script>
  alert("ğŸ›¡ï¸ SQL Injection Detected! You've successfully exploited the search query.");
</script>
{% endif %}

<!-- Search Form -->
<form method="post" action="/search" style="margin-bottom: 30px;">
  <input type="text" name="search" placeholder="Enter keyword..."
         style="padding: 10px; border-radius: 5px; border: 1px solid #475569; width: 250px;">
  <input type="submit" value="Search"
         style="padding: 10px 20px; border-radius: 5px; background-color: #2563eb; color: white; border: none;">
</form>

<!-- Product Results -->
{% if results %}
  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px;">
    {% for r in results %}
    <div style="background: #1e293b; border-radius: 10px; padding: 15px; text-align: center;">
      <img src="{{ url_for('static', filename='images/' + r['image']) }}" alt="{{ r['name'] }}"
           style="width: 100%; height: 140px; object-fit: contain; border-radius: 8px;">
      <h3 style="margin-top: 10px; color: #facc15;">{{ r['name'] }}</h3>
      <p style="font-size: 14px; color: #e2e8f0;">{{ r['description'] }}</p>
      <p style="font-size: 16px; color: #93c5fd;">ğŸ’° Price: ${{ "%.2f"|format(r['price']) }}</p>
    </div>
    {% endfor %}
  </div>
{% else %}
  <p style="color: #cbd5e1;">No results found.</p>
{% endif %}

<div style="margin-top: 30px;">
  <a href="/" style="color: #93c5fd;">â† Back to Home</a>
</div>

{% endblock %}
